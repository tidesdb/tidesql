TIDESQL
░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░

A pluggable write and space optimized storage engine for MariaDB/MySQL using TidesDB.


INSTALLATION
░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░

1. Clone MariaDB server:

   git clone https://github.com/MariaDB/server.git mariadb-server
   cd mariadb-server
   git checkout mariadb-12.1
   git submodule update --init --recursive

2. Copy storage engine:

   cp -r /path/to/tidesql/storage/tidesdb mariadb-server/storage/

3. Copy test suite:

   cp -r /path/to/tidesql/mysql-test/suite/tidesdb mariadb-server/mysql-test/suite/

4. Install TidesDB library (if not already installed):

   git clone https://github.com/tidesdb/tidesdb.git
   cd tidesdb && mkdir build && cd build
   cmake .. && make && sudo make install && sudo ldconfig

5. Build MariaDB:

   cd mariadb-server
   mkdir build && cd build
   cmake .. -DPLUGIN_TIDESDB=DYNAMIC
   make -j$(nproc)

6. Run tests:

   cd build
   ./mysql-test/mtr --suite=tidesdb

7. Enable plugin in MariaDB:

   INSTALL PLUGIN tidesdb SONAME 'ha_tidesdb.so';


FEATURES
░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░

Core:
- ACID transactions with commit, rollback, savepoints
- MVCC (Multi-Version Concurrency Control)
- LSM-tree storage (write-optimized)
- Compression (LZ4, ZSTD, Snappy)
- Bloom filters for fast key lookups
- Block cache for frequently accessed data

Advanced:
- XA distributed transactions (two-phase commit)
- TTL (time-to-live) per-row expiration
- Spatial indexes (Z-order/Morton code)
- Foreign key constraints (CASCADE, SET NULL)
- Full-text search indexing
- Virtual/generated columns
- Online backup
- Partitioning (RANGE, LIST, HASH, KEY)
- Data-at-rest encryption
- Online DDL for index operations
- Change buffer for secondary indexes


CONFIGURATION
░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░

All variables are prefixed with tidesdb_

Storage:
  data_dir                  Data directory (default: ./tidesdb)
  block_cache_size          Block cache size in bytes (default: 64MB)
  write_buffer_size         Memtable size before flush (default: 64MB)
  max_open_sstables         Max cached SSTable structures (default: 256)

Threads:
  flush_threads             Background flush threads (default: 2)
  compaction_threads        Background compaction threads (default: 2)

Compression:
  enable_compression        Enable compression (default: ON)
  compression_algo          Algorithm: none/snappy/lz4/zstd/lz4_fast (default: lz4)

Bloom Filters:
  enable_bloom_filter       Enable bloom filters (default: ON)
  bloom_fpr                 False positive rate 0.0-1.0 (default: 0.01)

Durability:
  sync_mode                 Sync mode: none/interval/full (default: full)
  sync_interval_us          Sync interval microseconds (default: 128000)

Isolation:
  default_isolation         read_uncommitted/read_committed/repeatable_read/snapshot/serializable (default: read_committed)

LSM Tree:
  level_size_ratio          Level size multiplier (default: 10)
  min_levels                Minimum LSM levels (default: 5)
  dividing_level_offset     Compaction dividing level offset (default: 2)
  l1_file_count_trigger     L1 file count trigger for compaction (default: 4)
  l0_queue_stall_threshold  L0 queue stall threshold (default: 20)

Skip List:
  skip_list_max_level       Max skip list level (default: 12)
  skip_list_probability     Skip list probability (default: 0.25)

Block Indexes:
  enable_block_indexes      Enable block indexes (default: ON)
  index_sample_ratio        Sample ratio for block index (default: 1)
  block_index_prefix_len    Block index prefix length (default: 16)

Value Log:
  klog_value_threshold      Values larger than this go to vlog (default: 512)

Resources:
  min_disk_space            Minimum disk space required (default: 100MB)

TTL:
  default_ttl               Default TTL in seconds, 0=none (default: 0)

Full-Text:
  ft_min_word_len           Minimum word length for FT index (default: 4)
  ft_max_word_len           Maximum word length for FT index (default: 84)

Logging:
  log_level                 debug/info/warn/error/fatal/none (default: info)
  log_to_file               Log to file instead of stderr (default: OFF)
  log_truncation_at         Log file truncation size in bytes (default: 24MB)

Encryption:
  enable_encryption         Enable data-at-rest encryption (default: OFF)
  encryption_key_id         Encryption key ID (default: 1)

Change Buffer:
  enable_change_buffer      Enable change buffer for secondary indexes (default: ON)
  change_buffer_max_size    Max pending entries before flush (default: 1024)

SSI (Serializable Snapshot Isolation):
  active_txn_buffer_size    Buffer size for SSI conflict detection (default: 64KB)


TESTING
░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░

Run all TidesDB tests:

  ./mysql-test/mtr --suite=tidesdb

Run specific test:

  ./mysql-test/mtr --suite=tidesdb basic

Run with verbose output:

  ./mysql-test/mtr --suite=tidesdb --verbose

Available tests:
  auto_increment    - Auto-increment columns
  backup            - Backup operations
  basic             - Basic CRUD operations
  bulk_insert       - Bulk insert performance
  datatypes         - Data type handling
  ddl               - DDL operations (CREATE, DROP, RENAME)
  encryption        - Encryption configuration
  fk_cascade        - Foreign key CASCADE/SET NULL
  foreign_keys      - Foreign key definitions
  fulltext          - Full-text search
  index_operations  - Index create/drop
  index_scan        - Index scan operations
  maintenance       - OPTIMIZE, ANALYZE, CHECK
  online_ddl        - Online ALTER TABLE
  partitioning      - Table partitioning
  secondary_index   - Secondary index operations
  spatial           - Spatial data types
  spatial_geometry  - Geometry functions
  spatial_index     - Spatial indexing
  transactions      - Transaction commit/rollback
  ttl               - Time-to-live expiration
  virtual_columns   - Generated columns
  xa_transactions   - XA distributed transactions


QUICK TEST
░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░

  CREATE TABLE t (id INT PRIMARY KEY, data VARCHAR(100)) ENGINE=TidesDB;
  INSERT INTO t VALUES (1, 'hello'), (2, 'world');
  SELECT * FROM t;
  DROP TABLE t;


LICENSE
░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░

GNU General Public License v2
