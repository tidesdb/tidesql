#
# TidesDB Table Maintenance Tests
#
DROP TABLE IF EXISTS tidesdb_check;
# Test 1: Create test table
CREATE TABLE t1 (
id INT PRIMARY KEY,
name VARCHAR(100),
value INT,
INDEX idx_name (name)
) ENGINE=TidesDB;
Warnings:
Note	1071	Specified key was too long; max key length is 255 bytes
INSERT INTO t1 VALUES (1, 'Alice', 100);
INSERT INTO t1 VALUES (2, 'Bob', 200);
INSERT INTO t1 VALUES (3, 'Charlie', 300);
# Test 2: ANALYZE TABLE
ANALYZE TABLE t1;
Table	Op	Msg_type	Msg_text
test.t1	X	X	X
test.t1	X	X	X
# Test 3: CHECK TABLE
CHECK TABLE t1;
Table	Op	Msg_type	Msg_text
test.t1	X	X	X
# Test 4: Verify data integrity after maintenance
SELECT * FROM t1 ORDER BY id;
id	name	value
1	Alice	100
2	Bob	200
3	Charlie	300
# Test 5: SHOW TABLE STATUS
SHOW TABLE STATUS LIKE 't1';
Name	Engine	Version	Row_format	Rows	Avg_row_length	Data_length	Max_data_length	Index_length	Data_free	Auto_increment	Create_time	Update_time	Check_time	Collation	Checksum	Create_options	Comment	Max_index_length	Temporary
t1	TidesDB	10	Dynamic	X	X	X	X	X	X	X	X	X	X	X	X	X	X	X	X
# Test 6: Table info after operations
SELECT COUNT(*) FROM t1;
COUNT(*)
4
# Cleanup
DROP TABLE t1;
#
# Maintenance tests completed!
#
